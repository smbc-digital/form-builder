@model form_builder.Models.Elements.Element
@{
    var elementProperties = Model.GenerateElementProperties();
    if(!Model.IsValid)
    {
        elementProperties.Add("class", "govuk-textarea govuk-js-character-count govuk-textarea--error");
    }
    else{
        elementProperties.Add("class", "govuk-textarea govuk-js-character-count");
    }
}

<div class="govuk-character-count" data-module="govuk-character-count" data-maxlength=@Model.Properties.MaxLength>
    <div class= @(!Model.IsValid ? "govuk-form-group govuk-form-group--error" : "govuk-form-group")>
        <partial name="LabelH1" />

        <partial name="Hint" />
        
        <partial name="Error" />
        
        @Html.TextArea(Model.QuestionId, Model.Properties.Value, elementProperties) 
    </div>
    <span id=@Model.GetCustomItemId("info") class="govuk-hint govuk-character-count__message" aria-live="polite">
        You can enter up to @Model.Properties.MaxLength characters
    </span>
</div>

@model form_builder.Models.Elements.Element
@{
    var hintId = $"{Model.Properties.QuestionId}-hint";
    var errorId = $"{Model.Properties.QuestionId}-error";
    var elementProperties = Model.GenerateElementProperties();
    elementProperties.Add("class", "govuk-textarea");
}

<div class="govuk-form-group">
    @if(Model.Properties.LabelAsH1) {
        <h1 class="govuk-label-wrapper">
            <label class="govuk-label govuk-label--xl" @Model.WriteOptional() for="@Model.Properties.QuestionId">@Model.Properties.Label
                @if (Model.Properties.Optional)
                {
                    <span>(optional)</span>
                }
            </label>
        </h1>
    } else {
        <label class="govuk-label" @Model.WriteOptional() for="@Model.Properties.QuestionId">@Model.Properties.Label
        @if (Model.Properties.Optional)
        {
            <span>(optional)</span>
        }
        </label>
    }

    @if (!string.IsNullOrEmpty(Model.Properties.Hint))
    {
        <span class="govuk-hint" id=@hintId>@Html.Raw(Model.Properties.Hint)</span>
        
    }
    <p class="govuk-hint">Your description can be up to @Model.Properties.MaxLength characters</p>
    
    @Html.TextArea(Model.Properties.QuestionId, Model.Properties.Value, elementProperties)

    @if (!Model.IsValid)
    {
        var validationMessage = string.IsNullOrEmpty(Model.Properties.CustomValidationMessage) ? Model.ValidationMessage : Model.Properties.CustomValidationMessage;
        <p class="input-error-content text-area-validation" id="@errorId">@validationMessage</p>
    }
</div>

@model form_builder.Models.Elements.Element
@{
    var hintId = $"{Model.Properties.QuestionId}-hint";
    var line1ErrorId = $"{Model.Properties.QuestionId}-addressline1-error";
    var townErrorId = $"{Model.Properties.QuestionId}-town-error";
    var PostcodeErrorId = $"{Model.Properties.QuestionId}-postcode-error";
    var line1id = $"{Model.Properties.QuestionId}-AddressManualAddressLine1";
    var line2id = $"{Model.Properties.QuestionId}-AddressManualAddressLine2";
    var line3id = $"{Model.Properties.QuestionId}-AddressManualAddressTown";
    var line4id = $"{Model.Properties.QuestionId}-AddressManualAddressPostcode";
    var errorMessages = Model.ValidationMessage.Split(", ");
}

    <fieldset aria-label="Manual Address" >
        <div>@Html.Raw(Model.Properties.AddressManualHint)</div>

        @if (!string.IsNullOrEmpty(Model.Properties.Hint.Trim()))
        {
            <p class="description" id=@hintId>@Model.Properties.Hint</p>
        }

        <label for="@line1id">Address line 1</label>
        @Html.TextBox(line1id, Model.Properties.AddressManualAddressLine1, Model.GenerateElementProperties())
        @if (!Model.IsValid && !string.IsNullOrEmpty(errorMessages[0]))
        {
            <p class="input-error-content" id="@line1ErrorId">@errorMessages[0]</p>
        }
        <label class="optional" for="@line2id">Address line 2</label>
        <p class="optional">(optional)</p>
        @Html.TextBox(line2id, Model.Properties.AddressManualAddressLine2, Model.GenerateElementProperties())
        <label for="@line3id">Town</label>
        @Html.TextBox(line3id, Model.Properties.AddressManualAddressTown, Model.GenerateElementProperties())
        @if (!Model.IsValid && !string.IsNullOrEmpty(errorMessages[1]))
        {
            <p class="input-error-content" id="@townErrorId">@errorMessages[1]</p>
        }
        <label for="@line4id">Postcode</label>
        @Html.TextBox(line4id, Model.Properties.AddressManualAddressPostcode, Model.GenerateElementProperties())
        @if (!Model.IsValid && !string.IsNullOrEmpty(errorMessages[2]))
        {
            <p class="input-error-content" id="@PostcodeErrorId">@errorMessages[2]</p>
        }
        <p><a href="address">Search by postcode</a></p>
    </fieldset>
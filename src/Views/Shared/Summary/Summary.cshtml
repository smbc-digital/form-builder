@model SummarySectionsViewModel

@for(int i = 0; i <  Model.Sections.Count(); i++)
{
    var summarySection = Model.Sections[i];
    @if(summarySection.ContainsPages)
    {
        var marginBottom = "govuk-!-margin-bottom-6";

        @if(i+1 < Model.Sections.Count()  && Model.Sections[i+1].DisplaySectionHeading)
        {
         marginBottom = "govuk-!-margin-bottom-9";
        }

        @if(summarySection.DisplaySectionHeading )
        {
            <h2 class="govuk-heading-m">@summarySection.Title</h2>
            marginBottom = "govuk-!-margin-bottom-9";
        }
        <dl class="govuk-summary-list @marginBottom">
            @foreach (var pageSummary in summarySection.Pages)
            {
                @foreach (var answer in pageSummary.Answers)
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">@answer.Key</dt>
                        <dd class="govuk-summary-list__value">@Html.Raw(answer.Value)</dd>
                        @if (Model.AllowEditing){
                            <dd class="govuk-summary-list__actions">
                                <a class="govuk-link" href="@pageSummary.PageSlug">Change <span class="govuk-visually-hidden">@answer.Key</span></a>
                            </dd>
                        }
                    </div>
                }
            }
        </dl>
    }
}
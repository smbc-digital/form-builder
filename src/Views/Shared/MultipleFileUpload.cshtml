@using form_builder.Constants
@model form_builder.Models.Elements.MultipleFileUpload
@{
    var sizeValidationError = $"{Model.QuestionId}-fileSizeError";
    var elements = Model.GenerateElementProperties();
    elements.Add("class", "govuk-file-upload");
    var uploadButtonClasses = Model.FileUpload.Any() ? "govuk-button govuk-button--secondary" : "govuk-button";
}

    <div class="govuk-form-group @(!Model.IsValid ? "govuk-form-group--error" : string.Empty)">

        <partial name="LabelH1" />
        
        <partial name="InsetText" model="@Model.Properties.IAG" />

        <partial name="Hint" />

        <partial name="Error" />

        @if (Model.FileUpload.Count > 0)
        {
            <label class="govuk-label govuk-label--s">Files uploaded</label>
            <br />
        }

        <table style="width:80%;">
            @foreach (var file in Model.FileUpload)
            {
                <tr>
                    <th>
                        <label class="govuk-label" style="text-align:left;">@file</label>
                    </th>
                    <th>
                        <button type="submit" name="@FileUploadConstants.FileToDelete" value="@file"
                                formaction="Index" formmethod="post">
                            Delete
                        </button>
                    </th>
                </tr>
            }
        </table>
        <br />

        @* TODO:This will work for fileupload, but not the form-group, need to work that out *@
        <span class="govuk-error-message" id="@sizeValidationError" style="display: none">
            <span class="govuk-visually-hidden">Error:</span> The selected file must be smaller than 23MB
        </span>

        @Html.TextBox(Model.QuestionId, Model.Properties.Value, elements)
        <br>
        <br>
        <br>
        <br>
        <button data-prevent-double-click="true"
                @(Model.Properties.DisableOnClick ? "data-disable-on-click=true" : string.Empty)
                class="@uploadButtonClasses"
                id="upload"
                data-module="govuk-button">
            Upload file(s)
        </button>
    </div>
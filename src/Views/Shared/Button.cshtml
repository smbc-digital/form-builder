@model form_builder.Models.Elements.Element
@{
    var behaviour = (bool)ViewData["bType"];
    var displayAnchor = (bool)ViewData["displayAnchor"];
    var text = string.IsNullOrEmpty(Model.Properties.Text) ? "Next step" : Model.Properties.Text;
    var className = string.IsNullOrEmpty(Model.Properties.ClassName) ? "button-primary" : Model.Properties.ClassName;
    var disableBtn = behaviour ? $"onclick=disableBtn();" : null;
}

<button class="@className" @disableBtn type="submit" id="@Model.Properties.ButtonId">@text</button>

@if (@displayAnchor)
{
    if (!Model.Properties.HidePreviousLink)
    {
        <a class="back-button" href="javascript:history.back(-1)">Previous</a>
    }
}

<script type="text/javascript">
    function disableBtn() {
        var disabledButton = document.getElementById("@Model.Properties.ButtonId");
        if (!disabledButton.className.includes("is-loading")) {
            disabledButton.className += " button-loading is-loading";
            return;
        }

        disabledButton.setAttribute("type", "button");
        return;
    }
</script>